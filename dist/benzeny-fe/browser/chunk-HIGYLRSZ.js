import{a as q}from"./chunk-ISVOGOV3.js";import{a as Y}from"./chunk-R7FY4BBO.js";import{a as Z}from"./chunk-6RTYTQSY.js";import{a as Q,b as u,c as W}from"./chunk-O5YOTQB5.js";import{a as te}from"./chunk-DP6XK2WQ.js";import"./chunk-FK6H3RFT.js";import{a as $,b as H,c as U}from"./chunk-TTDVWY7C.js";import"./chunk-MFRZFDYH.js";import{a as N,d as G}from"./chunk-ULCWY2OL.js";import"./chunk-3CFASREP.js";import{k as R,o as X}from"./chunk-NKPCLCB2.js";import{Cb as I,Db as D,Eb as V,Gb as r,Hb as z,Ib as _,Ma as d,Pb as L,Tb as A,U as f,Ub as P,Vb as j,Wb as F,X as M,Ya as h,cb as E,fa as c,ga as s,ha as O,ia as y,jb as k,kb as x,lb as b,mb as v,nb as a,ob as t,pb as C,sb as T,ta as B,xb as m,yb as l}from"./chunk-JIEL56YO.js";import{e as ee}from"./chunk-CWTPBX7D.js";var J=ee(te());var ne=["table"],ie=(o,g,e)=>({itemsPerPage:o,currentPage:g,totalItems:e});function ae(o,g){if(o&1&&(a(0,"p",41),r(1),t()),o&2){let e=g.$implicit;d(),z(e)}}function re(o,g){if(o&1&&(a(0,"tr")(1,"td"),r(2),t(),a(3,"td"),r(4),t(),a(5,"td"),r(6),t(),a(7,"td"),r(8),t(),a(9,"td"),r(10),P(11,"date"),t(),a(12,"td"),b(13,ae,2,1,"p",41,x),t(),a(15,"td"),r(16),t()()),o&2){let e=g.$implicit,n=g.$index;d(2),_(" ",n+1," "),d(2),_(" ",e.model," "),d(2),_(" ",e.carNumber," "),d(2),_(" ",e.color," "),d(2),_(" ",j(11,6,e.licenseDate)," "),d(3),v(e.driversName),d(3),_(" ",e.petrolType," ")}}function oe(o,g){if(o&1){let e=T();a(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21)(5,"input",22),m("input",function(i){c(e);let p=l();return s(p.filteredData(i))}),t(),O(),a(6,"svg",23),C(7,"path",24)(8,"path",25),t()()(),y(),a(9,"div",26)(10,"div")(11,"i",27),m("click",function(){c(e);let i=l();return s(i.downloadExcel())}),t()(),a(12,"div")(13,"i",28),m("click",function(){c(e);let i=l();return s(i.downloadPDF())}),t()()()(),a(14,"div",29)(15,"table",30,0)(17,"thead",31)(18,"tr")(19,"th",32),m("click",function(){c(e);let i=l();return s(i.sortTable("index"))}),r(20,"#"),t(),a(21,"th",32),m("click",function(){c(e);let i=l();return s(i.sortTable("model"))}),r(22,"Model"),t(),a(23,"th",32),m("click",function(){c(e);let i=l();return s(i.sortTable("carNumber"))}),r(24,"Plate"),t(),a(25,"th",32),m("click",function(){c(e);let i=l();return s(i.sortTable("color"))}),r(26,"Color"),t(),a(27,"th",32),m("click",function(){c(e);let i=l();return s(i.sortTable("licenseDate"))}),r(28,"License Date"),t(),a(29,"th",32),m("click",function(){c(e);let i=l();return s(i.sortTable("driverName"))}),r(30,"Driver Name"),t(),a(31,"th",32),m("click",function(){c(e);let i=l();return s(i.sortTable("petrolType"))}),r(32,"Petrol Type"),t()()(),a(33,"tbody"),b(34,re,17,8,"tr",null,x),P(36,"paginate"),t()(),a(37,"div",33)(38,"div")(39,"select",34),m("change",function(i){c(e);let p=l();return s(p.onChangePageSize(i))}),a(40,"option",35),r(41,"10"),t(),a(42,"option",36),r(43,"25"),t(),a(44,"option",37),r(45,"50"),t(),a(46,"option",38),r(47,"100"),t(),a(48,"option",39),r(49,"All"),t()()(),a(50,"div")(51,"pagination-controls",40),m("pageChange",function(i){c(e);let p=l();return s(p.onPageChange(i))}),t()()()()()()}if(o&2){let e=l();d(34),v(F(36,0,e.allCars(),A(3,ie,e.pageSize(),e.currentPage(),e.totalCars())))}}function le(o,g){o&1&&(a(0,"div",42),C(1,"img",43),t())}var Pe=(()=>{class o{constructor(){this._CarService=f(q),this._DriverService=f(Y),this._BranchService=f(Z),this._ActivatedRoute=f(N),this._PLATFORM_ID=f(B),this.branchId=h(""),this.companyId=h(localStorage.getItem("companyId")||""),this.allCars=h([]),this.driverBranch=h([]),this.allPage=h(0),this.currentPage=h(0),this.pageSize=h(0),this.totalCars=h(0),this.totalDrivers=h(0),this.sortColumn=h(""),this.sortDirection=h(!0)}ngOnInit(){this.getBranchById()}getBranchById(){this._ActivatedRoute.paramMap.subscribe(e=>{this.branchId.set(e.get("id")),this.getAllCars(),this.getAllDrivers()})}getAllCars(){this._CarService.GetAllCarsByBranchId(this.branchId()).subscribe(e=>{this.allCars.set(e.data.items),this.totalCars.set(e.data.totalCount),this.allPage.set(Math.ceil(e.data.totalCount/e.data.pageSize)),this.currentPage.set(e.data.pageNumber),this.pageSize.set(e.data.pageSize)})}getAllDrivers(){this._DriverService.GetDriversInBranch(this.branchId()).subscribe(e=>{this.driverBranch.set(e.data.items),this.totalDrivers.set(e.data.totalCount)})}filteredData(e){let n=e.target.value;this._CarService.GetAllCarsByBranchId(this.branchId(),n).subscribe(i=>{this.allCars.set(i.data.items)})}sortTable(e){this.sortColumn()===e?this.sortDirection.set(!this.sortDirection()):(this.sortColumn.set(e),this.sortDirection.set(!0)),this.allCars.update(n=>[...n].sort((i,p)=>i[e]>p[e]?this.sortDirection()?1:-1:i[e]<p[e]?this.sortDirection()?-1:1:0))}onPageChange(e){this.currentPage.set(e),this.changePagePagination(e)}changePagePagination(e){this._CarService.GetAllCarsByBranchId(this.branchId(),"",e).subscribe(n=>{this.allCars.set(n.data.items)})}onChangePageSize(e){let n=e.target.value;this._CarService.GetAllCarsByBranchId(this.branchId(),"",1,n).subscribe(i=>{this.pageSize.set(Number(n)),this.allCars.set(i.data.items)})}downloadPDF(){if(X(this._PLATFORM_ID)){let e=this.template.nativeElement;(0,J.default)(e).then(n=>{let w=n.height*208/n.width,ce=w,S=new W("p","mm","a4"),K=n.toDataURL("image/png");S.addImage(K,"png",0,0,208,w),S.save("table.pdf")})}}downloadExcel(){let e=u.table_to_sheet(this.template.nativeElement),n=u.book_new();u.book_append_sheet(n,e,"Sheet1"),Q(n,"table_data.xlsx")}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=M({type:o,selectors:[["app-branchdetails"]],viewQuery:function(n,i){if(n&1&&I(ne,5),n&2){let p;D(p=V())&&(i.template=p.first)}},standalone:!0,features:[L],decls:30,vars:3,consts:[["table",""],[1,"row","g-3"],["routerLink","/benzeny-companies",1,"go-back","cr","d-flex","justify-content-end","align-items-center","gap-1"],[1,"fw-bold"],[1,"fa-solid","fa-arrow-right-from-bracket","pe-3"],[1,"col-12","animate__animated","animate__fadeInDown"],[1,"row","g-2"],[1,"col-md-6"],[1,"head-card","position-relative","bg-white","h-100","d-flex","justify-content-between","aling-items-center","rounded-3","py-2","ps-4","pe-5"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"m-0"],[1,"icon-head","p-1","drivers","d-flex","justify-content-center","align-items-center","rounded-2","mt-3"],[1,"fa-solid","fa-user-tie"],["loading","lazy","src","assets/image/corner-img.png","alt","",1,"position-absolute","bottom-0","end-0"],[1,"head-card","position-relative","bg-white","h-100","d-flex","justify-content-between","aling-items-center","rounded-3","py-3","ps-4","pe-5"],[1,"icon-head","p-1","cars","d-flex","justify-content-center","align-items-center","rounded-2","mt-3"],[1,"fa-solid","fa-car"],[1,"col-12","animate__animated","animate__fadeInUp","z-2"],[1,"bg-white","rounded-3","p-4"],[1,"d-flex","justify-content-between","align-items-center","gap-3","mb-3","flex-wrap"],[1,"d-flex","gap-3"],[1,"search","position-relative"],["type","search","placeholder","Search... ",1,"form-control","bg-white","rounded-2",3,"input"],["width","30","height","31","viewBox","0 0 30 31","xmlns","http://www.w3.org/2000/svg"],["d","M12.5081 25.5129C15.3929 25.5167 18.1895 24.5185 20.4201 22.689L27.8808 30.1489C28.3776 30.6288 29.1692 30.615 29.649 30.1182C30.117 29.6335 30.117 28.8652 29.649 28.3805L22.1896 20.9194C26.5593 15.5706 25.766 7.69188 20.4177 3.32182C15.0693 -1.04824 7.19128 -0.254835 2.82159 5.09394C-1.54811 10.4427 -0.754773 18.3214 4.59356 22.6915C6.82738 24.5167 9.62347 25.5135 12.5081 25.5129Z"],["d","M22.5 12.9998C22.5 18.5231 18.0228 23.0006 12.5 23.0006C6.97715 23.0006 2.5 18.5231 2.5 12.9998C2.5 7.4765 6.97715 2.99897 12.5 2.99897C18.0228 2.99897 22.5 7.4765 22.5 12.9998Z","fill","white"],[1,"d-flex","justify-content-center","align-items-center","gap-3"],[1,"text-success","fa-solid","fa-file-excel","fs-3","cr",3,"click"],[1,"text-danger","fa-solid","fa-file-pdf","fs-3","cr",3,"click"],[1,"table-responsive"],[1,"table","table-striped","text-center"],[1,"table-head"],[1,"fw-medium","cr",3,"click"],[1,"d-flex","justify-content-between","align-items-center"],["name","pageSize","id","pageSize",1,"form-select","bg-white","py-1",3,"change"],["value","10"],["value","25"],["value","50"],["value","100"],["value","10000"],[1,"d-flex","justify-content-start","my-pagination",3,"pageChange"],[1,"text-table"],[1,"vh-100","d-flex","flex-column","justify-content-center","align-items-center","bg-white","shadow","rounded-3"],["loading","lazy","src","/assets/image/error_9042574.png","alt","error404","srcset","",1,"err-img"]],template:function(n,i){n&1&&(a(0,"section")(1,"div",1)(2,"div",2)(3,"span",3),r(4,"Go Back"),t(),C(5,"i",4),t(),a(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"p",10),r(12,"Total Drivers"),t(),a(13,"h3"),r(14),t()(),a(15,"div",11),C(16,"i",12),t(),C(17,"img",13),t()(),a(18,"div",7)(19,"div",14)(20,"div",9)(21,"p",10),r(22,"Total Vehicles"),t(),a(23,"h3"),r(24),t()(),a(25,"div",15),C(26,"i",16),t(),C(27,"img",13),t()()()(),E(28,oe,52,7,"div",17)(29,le,2,0),t()()),n&2&&(d(14),_(" ",i.totalDrivers()," "),d(10),_(" ",i.totalCars()," "),d(4),k(28,i.allCars.length?28:29))},dependencies:[U,$,H,R,G],styles:[".go-back[_ngcontent-%COMP%]{color:#f79320}.go-back[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}.go-back[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.head-card[_ngcontent-%COMP%]   .icon-head[_ngcontent-%COMP%]{height:fit-content;border:1px dotted}.head-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:130px;height:100%;object-fit:cover;filter:sepia(350%)}.head-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#96a0b5;font-size:18px}.head-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:500;color:#222}i[_ngcontent-%COMP%]{font-size:25px!important}.cars[_ngcontent-%COMP%], .drivers[_ngcontent-%COMP%]{border-color:#ffbf00!important}.cars[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .drivers[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ffbf00}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .current{background:#f79320!important;color:#fff!important}.err-img[_ngcontent-%COMP%]{width:300px}.table-head[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#b5b5b570!important}.add-btn[_ngcontent-%COMP%]{border:1px solid rgba(249,123,33,.5647058824);width:fit-content;padding:0 10px;transition:all .3s}.add-btn[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#f79320;transition:all .3s}.add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#f97c21;transition:all .3s}.add-btn[_ngcontent-%COMP%]:hover{background-color:#f79320}.add-btn[_ngcontent-%COMP%]:hover   h5[_ngcontent-%COMP%]{color:#fff}.add-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#fff}.dis-active-btn[_ngcontent-%COMP%]{width:fit-content;border:none;font-size:12px;background-color:#dcdcdc}.active-btn[_ngcontent-%COMP%]{width:fit-content;border:none;font-size:12px;background-color:#008d7a}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:300px;border:1px solid rgba(249,123,33,.5647058824)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#b8b8b8;font-weight:300}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#f79320!important}.search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);right:10px;width:20px;fill:#f79320}@media (max-width: 567px){.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:200px;border:1px solid rgba(249,123,33,.5647058824);background-color:#fff}}"]})}}return o})();export{Pe as BranchdetailsComponent};
