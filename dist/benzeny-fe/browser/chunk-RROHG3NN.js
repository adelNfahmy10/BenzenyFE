import{a as Z}from"./chunk-AU4YBC5Y.js";import{a as W}from"./chunk-MYBLRLTN.js";import{a as U}from"./chunk-VEU5YR25.js";import{a as N,b,c as H}from"./chunk-O5YOTQB5.js";import{a as K}from"./chunk-DP6XK2WQ.js";import"./chunk-FK6H3RFT.js";import{a as G,b as Q,c as $}from"./chunk-E5DKLYY5.js";import"./chunk-MFRZFDYH.js";import{a as R,d as X}from"./chunk-TT5SZMGP.js";import"./chunk-TDUUQU5B.js";import"./chunk-RMMMRGLO.js";import{k as j,o as F}from"./chunk-ZXHXV3L2.js";import{Cb as k,Db as I,Eb as T,Gb as r,Hb as D,Ib as g,Ma as p,Pb as V,Tb as z,U as C,Ub as x,Vb as L,Wb as A,X as M,Ya as h,fa as s,ga as c,ha as O,ia as y,kb as v,lb as P,mb as w,nb as i,ob as t,pb as _,sb as E,ta as B,xb as d}from"./chunk-XGXIU26N.js";import{e as J}from"./chunk-CWTPBX7D.js";var q=J(K());var ee=["table"],te=(m,f,e)=>({itemsPerPage:m,currentPage:f,totalItems:e});function ie(m,f){if(m&1&&(i(0,"p",41),r(1),t()),m&2){let e=f.$implicit;p(),D(e)}}function ne(m,f){if(m&1&&(i(0,"tr")(1,"td"),r(2),t(),i(3,"td"),r(4),t(),i(5,"td"),r(6),t(),i(7,"td"),r(8),t(),i(9,"td"),r(10),x(11,"date"),t(),i(12,"td"),P(13,ie,2,1,"p",41,v),t(),i(15,"td"),r(16),t()()),m&2){let e=f.$implicit,a=f.$index;p(2),g(" ",a+1," "),p(2),g(" ",e.model," "),p(2),g(" ",e.carNumber," "),p(2),g(" ",e.color," "),p(2),g(" ",L(11,6,e.licenseDate)," "),p(3),w(e.driversName),p(3),g(" ",e.petrolType," ")}}var ue=(()=>{class m{constructor(){this._CarService=C(W),this._DriverService=C(Z),this._BranchService=C(U),this._ActivatedRoute=C(R),this._PLATFORM_ID=C(B),this.branchId=h(""),this.companyId=h(localStorage.getItem("companyId")||""),this.allCars=h([]),this.driverBranch=h([]),this.allPage=h(0),this.currentPage=h(0),this.pageSize=h(0),this.totalCars=h(0),this.totalDrivers=h(0),this.sortColumn=h(""),this.sortDirection=h(!0)}ngOnInit(){this.getBranchById()}getBranchById(){this._ActivatedRoute.paramMap.subscribe(e=>{this.branchId.set(e.get("id")),this.getAllCars(),this.getAllDrivers()})}getAllCars(){this._CarService.GetAllCarsByBranchId(this.branchId()).subscribe(e=>{this.allCars.set(e.data.items),this.totalCars.set(e.data.totalCount),this.allPage.set(Math.ceil(e.data.totalCount/e.data.pageSize)),this.currentPage.set(e.data.pageNumber),this.pageSize.set(e.data.pageSize)})}getAllDrivers(){this._DriverService.GetDriversInBranch(this.branchId()).subscribe(e=>{this.driverBranch.set(e.data.items),this.totalDrivers.set(e.data.totalCount)})}filteredData(e){let a=e.target.value;this._CarService.GetAllCarsByBranchId(this.branchId(),a).subscribe(n=>{this.allCars.set(n.data.items)})}sortTable(e){this.sortColumn()===e?this.sortDirection.set(!this.sortDirection()):(this.sortColumn.set(e),this.sortDirection.set(!0)),this.allCars.update(a=>[...a].sort((n,o)=>n[e]>o[e]?this.sortDirection()?1:-1:n[e]<o[e]?this.sortDirection()?-1:1:0))}onPageChange(e){this.currentPage.set(e),this.changePagePagination(e)}changePagePagination(e){this._CarService.GetAllCarsByBranchId(this.branchId(),"",e).subscribe(a=>{this.allCars.set(a.data.items)})}onChangePageSize(e){let a=e.target.value;this._CarService.GetAllCarsByBranchId(this.branchId(),"",1,a).subscribe(n=>{this.pageSize.set(Number(a)),this.allCars.set(n.data.items)})}downloadPDF(){if(F(this._PLATFORM_ID)){let e=this.template.nativeElement;(0,q.default)(e).then(a=>{let l=a.height*208/a.width,u=l,S=new H("p","mm","a4"),Y=a.toDataURL("image/png");S.addImage(Y,"png",0,0,208,l),S.save("table.pdf")})}}downloadExcel(){let e=b.table_to_sheet(this.template.nativeElement),a=b.book_new();b.book_append_sheet(a,e,"Sheet1"),N(a,"table_data.xlsx")}static{this.\u0275fac=function(a){return new(a||m)}}static{this.\u0275cmp=M({type:m,selectors:[["app-branchdetails"]],viewQuery:function(a,n){if(a&1&&k(ee,5),a&2){let o;I(o=T())&&(n.template=o.first)}},standalone:!0,features:[V],decls:80,vars:9,consts:[["table",""],[1,"row","g-3"],["routerLink","/benzeny-companies",1,"go-back","cr","d-flex","justify-content-end","align-items-center","gap-1"],[1,"fw-bold"],[1,"fa-solid","fa-arrow-right-from-bracket","pe-3"],[1,"col-12","animate__animated","animate__fadeInDown"],[1,"row","g-2"],[1,"col-md-6"],[1,"head-card","position-relative","bg-white","h-100","d-flex","justify-content-between","aling-items-center","rounded-3","py-2","ps-4","pe-5"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"m-0"],[1,"icon-head","p-1","drivers","d-flex","justify-content-center","align-items-center","rounded-2","mt-3"],[1,"fa-solid","fa-user-tie"],["loading","lazy","src","assets/image/corner-img.png","alt","",1,"position-absolute","bottom-0","end-0"],[1,"head-card","position-relative","bg-white","h-100","d-flex","justify-content-between","aling-items-center","rounded-3","py-3","ps-4","pe-5"],[1,"icon-head","p-1","cars","d-flex","justify-content-center","align-items-center","rounded-2","mt-3"],[1,"fa-solid","fa-car"],[1,"col-12","animate__animated","animate__fadeInUp","z-2"],[1,"bg-white","rounded-3","p-4"],[1,"d-flex","justify-content-between","align-items-center","gap-3","mb-3","flex-wrap"],[1,"d-flex","gap-3"],[1,"search","position-relative"],["type","search","placeholder","Search... ",1,"form-control","bg-white","rounded-2",3,"input"],["width","30","height","31","viewBox","0 0 30 31","xmlns","http://www.w3.org/2000/svg"],["d","M12.5081 25.5129C15.3929 25.5167 18.1895 24.5185 20.4201 22.689L27.8808 30.1489C28.3776 30.6288 29.1692 30.615 29.649 30.1182C30.117 29.6335 30.117 28.8652 29.649 28.3805L22.1896 20.9194C26.5593 15.5706 25.766 7.69188 20.4177 3.32182C15.0693 -1.04824 7.19128 -0.254835 2.82159 5.09394C-1.54811 10.4427 -0.754773 18.3214 4.59356 22.6915C6.82738 24.5167 9.62347 25.5135 12.5081 25.5129Z"],["d","M22.5 12.9998C22.5 18.5231 18.0228 23.0006 12.5 23.0006C6.97715 23.0006 2.5 18.5231 2.5 12.9998C2.5 7.4765 6.97715 2.99897 12.5 2.99897C18.0228 2.99897 22.5 7.4765 22.5 12.9998Z","fill","white"],[1,"d-flex","justify-content-center","align-items-center","gap-3"],[1,"text-success","fa-solid","fa-file-excel","fs-3","cr",3,"click"],[1,"text-danger","fa-solid","fa-file-pdf","fs-3","cr",3,"click"],[1,"table-responsive"],[1,"table","table-striped","text-center"],[1,"table-head"],[1,"fw-medium","cr",3,"click"],[1,"d-flex","justify-content-between","align-items-center"],["name","pageSize","id","pageSize",1,"form-select","bg-white","py-1",3,"change"],["value","10"],["value","25"],["value","50"],["value","100"],["value","10000"],[1,"d-flex","justify-content-start","my-pagination",3,"pageChange"],[1,"text-table"]],template:function(a,n){if(a&1){let o=E();i(0,"section")(1,"div",1)(2,"div",2)(3,"span",3),r(4,"Go Back"),t(),_(5,"i",4),t(),i(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"p",10),r(12,"Total Drivers"),t(),i(13,"h3"),r(14),t()(),i(15,"div",11),_(16,"i",12),t(),_(17,"img",13),t()(),i(18,"div",7)(19,"div",14)(20,"div",9)(21,"p",10),r(22,"Total Vehicles"),t(),i(23,"h3"),r(24),t()(),i(25,"div",15),_(26,"i",16),t(),_(27,"img",13),t()()()(),i(28,"div",17)(29,"div",18)(30,"div",19)(31,"div",20)(32,"div",21)(33,"input",22),d("input",function(u){return s(o),c(n.filteredData(u))}),t(),O(),i(34,"svg",23),_(35,"path",24)(36,"path",25),t()()(),y(),i(37,"div",26)(38,"div")(39,"i",27),d("click",function(){return s(o),c(n.downloadExcel())}),t()(),i(40,"div")(41,"i",28),d("click",function(){return s(o),c(n.downloadPDF())}),t()()()(),i(42,"div",29)(43,"table",30,0)(45,"thead",31)(46,"tr")(47,"th",32),d("click",function(){return s(o),c(n.sortTable("index"))}),r(48,"#"),t(),i(49,"th",32),d("click",function(){return s(o),c(n.sortTable("model"))}),r(50,"Model"),t(),i(51,"th",32),d("click",function(){return s(o),c(n.sortTable("carNumber"))}),r(52,"Plate"),t(),i(53,"th",32),d("click",function(){return s(o),c(n.sortTable("color"))}),r(54,"Color"),t(),i(55,"th",32),d("click",function(){return s(o),c(n.sortTable("licenseDate"))}),r(56,"License Date"),t(),i(57,"th",32),d("click",function(){return s(o),c(n.sortTable("driverName"))}),r(58,"Driver Name"),t(),i(59,"th",32),d("click",function(){return s(o),c(n.sortTable("petrolType"))}),r(60,"Petrol Type"),t()()(),i(61,"tbody"),P(62,ne,17,8,"tr",null,v),x(64,"paginate"),t()(),i(65,"div",33)(66,"div")(67,"select",34),d("change",function(u){return s(o),c(n.onChangePageSize(u))}),i(68,"option",35),r(69,"10"),t(),i(70,"option",36),r(71,"25"),t(),i(72,"option",37),r(73,"50"),t(),i(74,"option",38),r(75,"100"),t(),i(76,"option",39),r(77,"All"),t()()(),i(78,"div")(79,"pagination-controls",40),d("pageChange",function(u){return s(o),c(n.onPageChange(u))}),t()()()()()()()()}a&2&&(p(14),g(" ",n.totalDrivers()," "),p(10),g(" ",n.totalCars()," "),p(38),w(A(64,2,n.allCars(),z(5,te,n.pageSize(),n.currentPage(),n.totalCars()))))},dependencies:[$,G,Q,j,X],styles:[".go-back[_ngcontent-%COMP%]{color:#f79320}.go-back[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}.go-back[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.head-card[_ngcontent-%COMP%]   .icon-head[_ngcontent-%COMP%]{height:fit-content;border:1px dotted}.head-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:130px;height:100%;object-fit:cover;filter:sepia(350%)}.head-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#96a0b5;font-size:18px}.head-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:500;color:#222}i[_ngcontent-%COMP%]{font-size:25px!important}.cars[_ngcontent-%COMP%], .drivers[_ngcontent-%COMP%]{border-color:#ffbf00!important}.cars[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .drivers[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ffbf00}.my-pagination[_ngcontent-%COMP%]     .ngx-pagination .current{background:#f79320!important;color:#fff!important}.err-img[_ngcontent-%COMP%]{width:300px}.table-head[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#b5b5b570!important}.add-btn[_ngcontent-%COMP%]{border:1px solid rgba(249,123,33,.5647058824);width:fit-content;padding:0 10px;transition:all .3s}.add-btn[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#f79320;transition:all .3s}.add-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#f97c21;transition:all .3s}.add-btn[_ngcontent-%COMP%]:hover{background-color:#f79320}.add-btn[_ngcontent-%COMP%]:hover   h5[_ngcontent-%COMP%]{color:#fff}.add-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#fff}.dis-active-btn[_ngcontent-%COMP%]{width:fit-content;border:none;font-size:12px;background-color:#dcdcdc}.active-btn[_ngcontent-%COMP%]{width:fit-content;border:none;font-size:12px;background-color:#008d7a}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:300px;border:1px solid rgba(249,123,33,.5647058824)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#b8b8b8;font-weight:300}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#f79320!important}.search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);right:10px;width:20px;fill:#f79320}@media (max-width: 567px){.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:200px;border:1px solid rgba(249,123,33,.5647058824);background-color:#fff}}"]})}}return m})();export{ue as BranchdetailsComponent};
